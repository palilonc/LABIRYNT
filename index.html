<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Milionerzy</title>
    <style>
        /* Twoje style pozostają bez zmian */
    </style>
</head>
<body>
    <div id="quiz-container">
        <ul id="prizes-list">
            <li>1 000 000 zł</li>
            <li>500 000 zł</li>
            <li>250 000 zł</li>
            <li>125 000 zł</li>
            <li>75 000 zł</li>
            <li>40 000 zł</li>
            <li>20 000 zł</li>
            <li>10 000 zł</li>
            <li>5 000 zł</li>
            <li>2 000 zł</li>
            <li>1 000 zł</li>
            <li>500 zł</li>
        </ul>
        <div id="question-container" style="display: none;">
            <div class="question"></div>
            <div class="answers"></div>
        </div>
        <div id="stake-container">Stawka: 0 zł</div>
        <button id="quit-button" style="display: none;">Rezygnuję</button>
        <div id="result-container"></div>
    </div>

    <button id="start-button">Start Gry</button>

    <audio id="background-music" src="https://github.com/palilonc/milonerzy/raw/refs/heads/main/Theme%20Contestants%20-%20Who%20Wants%20to%20Be%20a%20Millionaire_.mp3" preload="auto"></audio>

    <div id="scoreboard-container" style="display: none;">
        <h2>Tablica wyników</h2>
        <table id="scoreboard">
            <thead>
                <tr>
                    <th>Imię</th>
                    <th>Wynik</th>
                </tr>
            </thead>
            <tbody id="scoreboard-body">
            </tbody>
        </table>
        <input type="text" id="name-input" placeholder="Wpisz swoje imię">
        <button id="save-score-button">Zapisz wynik</button>
    </div>

    <script>
        const questions = [
            { question: "W którym roku wybuchło powstanie warszawskie?", answers: ["1939", "1943", "1944", "1945"], correct: 2 },
            { question: "Kto był pierwszym królem Polski?", answers: ["Mieszko I", "Bolesław Chrobry", "Kazimierz Wielki", "Władysław Jagiełło"], correct: 1 },
            { question: "Stolica Polski to?", answers: ["Kraków", "Warszawa", "Gdańsk", "Wrocław"], correct: 1 },
            { question: "Co to jest HTML?", answers: ["Język programowania", "Język znaczników", "System operacyjny", "Rodzaj bazy danych"], correct: 1 }
        ];

        const prizeList = [
            "1 000 000 zł",
            "500 000 zł",
            "250 000 zł",
            "125 000 zł",
            "75 000 zł",
            "40 000 zł",
            "20 000 zł",
            "10 000 zł",
            "5 000 zł",
            "2 000 zł",
            "1 000 zł",
            "500 zł"
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let scoreboard = JSON.parse(localStorage.getItem('scoreboard')) || [];
        const backgroundMusic = document.getElementById('background-music');

        document.getElementById('start-button').addEventListener('click', function() {
            startQuiz();
            backgroundMusic.play();
        });

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            document.getElementById('result-container').innerHTML = '';
            document.getElementById('stake-container').innerHTML = 'Stawka: 0 zł';
            document.getElementById('quit-button').style.display = 'inline-block';
            document.getElementById('question-container').style.display = 'block';
            document.getElementById('result-container').style.display = 'none';
            document.getElementById('start-button').style.display = 'none';
            shuffleQuestions();
            highlightPrize();
            showQuestion();
        }

        function shuffleQuestions() {
            for (let i = questions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [questions[i], questions[j]] = [questions[j], questions[i]];
            }
        }

        function showQuestion() {
            if (currentQuestionIndex < prizeList.length) {
                const question = questions[currentQuestionIndex];
                document.querySelector('.question').innerText = question.question;
                const answersContainer = document.querySelector('.answers');
                answersContainer.innerHTML = '';
                question.answers.forEach((answer, index) => {
                    const button = document.createElement('button');
                    button.innerText = answer;
                    button.onclick = () => selectAnswer(index);
                    answersContainer.appendChild(button);
                });
            } else {
                endQuiz();
            }
        }

        function selectAnswer(index) {
            const question = questions[currentQuestionIndex];
            if (index === question.correct) {
                score = prizeList[prizeList.length - currentQuestionIndex - 1];
                document.getElementById('stake-container').innerText = `Stawka: ${score}`;
                currentQuestionIndex++;
                highlightPrize();
                showQuestion();
            } else {
                endQuiz();
            }
        }

        function endQuiz() {
            document.getElementById('question-container').style.display = 'none';
            document.getElementById('result-container').innerText = `Koniec gry! Twoja wygrana to ${score}`;
            document.getElementById('result-container').style.display = 'block';
            document.getElementById('quit-button').style.display = 'none';
            document.getElementById('scoreboard-container').style.display = 'block';
            backgroundMusic.pause();
            updateScoreboard(); // Zaktualizuj tablicę wyników
        }

        function highlightPrize() {
            const prizesListItems = document.querySelectorAll('#prizes-list li');
            prizesListItems.forEach((item, index) => {
                item.classList.remove('highlight');
                if (index === prizesListItems.length - currentQuestionIndex - 1) {
                    item.classList.add('highlight');
                }
            });
        }

        document.getElementById('save-score-button').addEventListener('click', function() {
            const playerName = document.getElementById('name-input').value;
            if (playerName) {
                scoreboard.push({ name: playerName, score: score });
                localStorage.setItem('scoreboard', JSON.stringify(scoreboard)); // Zapisz wyniki do localStorage
                updateScoreboard();
                document.getElementById('name-input').value = ''; // Wyczyść pole
            }
        });

        function updateScoreboard() {
            const scoreboardBody = document.getElementById('scoreboard-body');
            scoreboardBody.innerHTML = '';
            scoreboard.forEach(entry => {
                const row = document.createElement('tr');
                const nameCell = document.createElement('td');
                const scoreCell = document.createElement('td');
                nameCell.innerText = entry.name;
                scoreCell.innerText = entry.score;
                row.appendChild(nameCell);
                row.appendChild(scoreCell);
                scoreboardBody.appendChild(row);
            });
        }

        document.getElementById('quit-button').addEventListener('click', endQuiz);

        backgroundMusic.volume = 0.5;
        backgroundMusic.loop = true;

        // Naładowanie wyników z localStorage
        updateScoreboard();
    </script>
</body>
</html>
